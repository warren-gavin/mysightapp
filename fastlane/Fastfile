default_platform(:ios)

platform :ios do
  desc "Generate new localized screenshots"
  lane :screenshots do
    capture_screenshots(workspace: "MySight.xcworkspace",
                        scheme: "AppStoreScreenshots",
                        dark_mode: true,
                        number_of_retries: 2,
                        erase_simulator: true)
  end

  lane :framed do
      # When updating to new Xcode versions etc it might be
      # necessary to first run
      #
      #   fastlane frameit download_frames
      frame_screenshots
  end

  lane :push do
      # This will result in a 2FA pass, keep an eye on the phone!
      deliver(username: ENV['APPSTORECONNECT_USER'],
              overwrite_screenshots: true,
              force: true,
              precheck_include_in_app_purchases: false)
  end
end
